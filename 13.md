# C++20 - std::format
---

## Hva hadde vi før C++20

printf/fprintf/sprintf/snprintf (fra C) og iostreams
```
int x{11};

printf("x has value %d and y has value %s", x, "mystr"); // ikke typesikker, feil vises under kjøring
std::cout << "x has value " << x << "and y has value " << "mystr"; // mange linjer, vanskelig å lese og oversette
```

---

## `<format>` og `std::format`

- Enklere å bruke enn printf og ytelsen er også bedre! 
- Støtter std::locale (f.eks for å skrive ut tall med lokal separatorer: 10'000,123 vs 10000.123).
- Kan ganske enkelt defineres for egne typer (med egen format_specifier!).
- Funksjonen `format` lager en string, mens med `format_to` må et eksisterende buffer angis.

```
#include <format>
using namespace std;

int x{11};

cout << format("x has value {} and str has value {}", x, "mystr");
cout << format("y has value {1} and x has value {0}", x, "mystr");
```

---

## `{[index]:[format_specifier]}` med format_specifier: `[[fill]align][sign][#][0][width][.precision][type]`

fill og align (`<` left (default for ikke-tall), `>` right (default for tall), `^` center):
```
int i{42};
cout << format("|{:5}|", i) << endl; //   |   42| 
cout << format("|{:_<5}|", i) << endl; // |42___| 
cout << format("|{:_^5}|", i) << endl; // |_42__| 
```

---

## `{[index]:[format_specifier]}` med format_specifier: `[[fill]align][sign][#][0][width][.precision][type]`

sign (`-` viser - for negative tall og er default, `+` viser + og -, ` ` (space) viser - for - og mellomrom for positive tall)  :
```
int i{42};
cout << format("|{:<5}|", i) << endl; //  |42   | 
cout << format("|{:<5}|", -i) << endl; // |-42  | 
cout << format("|{:<+5}|", i) << endl; // |+42  | 
cout << format("|{:< 5}|", i) << endl; // | 42  | 
```

---

## `{[index]:[format_specifier]}` med format_specifier: `[[fill]align][sign][#][0][width][.precision][type]`

.precision - angir antall sifre for flyttall eller antallet tegn i en string (enten et tall eller hent tallet fra et argument)
width (enten et tall for antall tegn, eller hent tallet fra et argument):
```
int i{42};
cout << format("|{:5}|", i) << endl; //      |   42| 
cout << format("|{:{}}|", i, 5) << endl; //  |   42| 
cout << format("|{:{1}}|", i, 5) << endl; // |   42| 
```

---

## `{[index]:[format_specifier]}` med format_specifier: `[[fill]align][sign][#][0][width][.precision][type]`

# alternate formatting og type:
- integer (b (binary), B (binary), d (decimal som er default), o (octal), x (hex a,b,c..), X (hex A,B,C...)
- floating-point: e/E (scientific), f/F fixed), g/G (general som er default), a/A (hexademical)
- boolean: s (true eller false som er default), b, B, c, d, o, x, X (1 eller 0)
- character: c (character som er default), b, B, c, d, o, x, X (tallverdien)
- strings: s
- pointers: p (hex med 0x foran)

```
int i{42};
cout << format("|{:10d}|", i) << endl;  // |        42| 
cout << format("|{:10b}|", i) << endl;  // |    101010| 
cout << format("|{:10B}|", i) << endl;  // |    101010| 
cout << format("|{:#10b}|", i) << endl; // |  0b101010| 
cout << format("|{:#10B}|", i) << endl; // |  0B101010| 
```

```
double d{3.1415 / 2.3};
cout << format("|{:12g}|", d) << endl;  // |    1.365870| 
cout << format("|{:12.2}|", d) << endl; // |        1.37| 
cout << format("|{:12e}|", d) << endl;  // |1.365870e+00| 
```

---

## `{[index]:[format_specifier]}` med format_specifier: `[[fill]align][sign][#][0][width][.precision][type]`

`0` setter inn 0'er før tallet for å oppnå minimum width (hvis ikke align er spesifisert)
```
int i{42};
cout << format("|{:06d}|", i) << endl; //   |000042| 
cout << format("|{:+06d}|", i) << endl; //  |+00042| 
```
